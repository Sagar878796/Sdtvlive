<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STV LIVE</title>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>

body{
background:black;
color:white;
margin:0;
font-family:Arial;
}

video{
width:100%;
height:220px;
background:black;
}

.channels{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:10px;
padding:10px;
}

.channel{
background:#111;
padding:10px;
text-align:center;
border-radius:8px;
cursor:pointer;
}

.channel:hover{
background:#333;
}

</style>

</head>

<body>

<video id="video" controls autoplay></video>

<div class="channels" id="channels"></div>

<script>

// proxy use karo agar direct play nahi hota
const proxy = "";
// example proxy:
// const proxy = "https://yourproxy.onrender.com/?url=";

const playlist = "https://raw.githubusercontent.com/Sagar878796/Stvlive/main/playlist.m3u";

fetch(playlist)
.then(res => res.text())
.then(data => {

const lines = data.split("\n");

for(let i=0;i<lines.length;i++){

if(lines[i].startsWith("#EXTINF")){

let name = lines[i].split(",")[1];
let url = lines[i+1];

let div = document.createElement("div");

div.className="channel";

div.innerText=name;

div.onclick=()=>play(proxy+url);

document.getElementById("channels").appendChild(div);

}

}

});

function play(url){

const video=document.getElementById("video");

if(Hls.isSupported()){

const hls=new Hls();

hls.loadSource(url);

hls.attachMedia(video);

hls.on(Hls.Events.MANIFEST_PARSED,function(){

video.play();

});

}else{

video.src=url;

video.play();

}

}

</script>

</body>
</html>
